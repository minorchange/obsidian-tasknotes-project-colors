var d=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var f=(n,s)=>{for(var e in s)d(n,e,{get:s[e],enumerable:!0})},v=(n,s,e,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of u(s))!b.call(n,r)&&r!==e&&d(n,r,{get:()=>s[r],enumerable:!(t=p(s,r))||t.enumerable});return n};var m=n=>v(d({},"__esModule",{value:!0}),n);var y={};f(y,{default:()=>a});module.exports=m(y);var l=require("obsidian"),a=class extends l.Plugin{constructor(){super(...arguments);this.observers=new Map}async onload(){this.observeWindow(document),this.registerEvent(this.app.workspace.on("window-open",e=>{this.observeWindow(e.doc)})),this.registerEvent(this.app.workspace.on("window-close",e=>{let t=this.observers.get(e.doc);t&&(t.disconnect(),this.observers.delete(e.doc))}))}onunload(){for(let[e,t]of this.observers)t.disconnect(),e.querySelectorAll(".tasknotes-plugin .task-card").forEach(r=>{r.style.removeProperty("--project-hue")});this.observers.clear()}observeWindow(e){let t=new MutationObserver(r=>{for(let i of r)for(let o of i.addedNodes)o.nodeType===Node.ELEMENT_NODE&&this.colorCards(o)});t.observe(e.body,{childList:!0,subtree:!0}),this.observers.set(e,t),this.colorCards(e.body)}colorCards(e){var r;let t=e.querySelectorAll(".tasknotes-plugin .task-card__project-link[data-href]");for(let i of t){let o=i.closest(".task-card");if(!o||o.style.getPropertyValue("--project-hue"))continue;let c=i.getAttribute("data-href");if(!c)continue;let h=this.djb2(c)%360;o.style.setProperty("--project-hue",String(h))}if((r=e.matches)!=null&&r.call(e,".task-card")){let i=e.querySelector(".task-card__project-link[data-href]");if(i&&!e.style.getPropertyValue("--project-hue")){let o=i.getAttribute("data-href");if(o){let c=this.djb2(o)%360;e.style.setProperty("--project-hue",String(c))}}}}djb2(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)>>>0;return t}};
